---
import Layout from "../../layouts/Layout.astro";
import Container from "../../components/ui/Container.astro";
import PostCard from "../../components/blog/PostCard.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog"))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<Layout
  title="Blog — Southlike Software"
  description="Artigos sobre automação com IA, integração com CRM, qualificação de leads e estratégias para crescer com tecnologia."
>
  <Container class="py-24">
    <div class="mx-auto max-w-3xl">
      <h1 class="font-heading text-4xl font-semibold tracking-tight sm:text-5xl">Blog</h1>
      <p class="mt-4 text-lg text-neutral-300">
        Ideias práticas sobre automação, IA e crescimento de negócios.
      </p>
    </div>

    {posts.length > 0 ? (
      <div class="mx-auto mt-12 grid max-w-4xl grid-cols-1 gap-6 sm:grid-cols-2">
        {posts.map((post) => (
          <PostCard
            title={post.data.title}
            description={post.data.description}
            pubDate={post.data.pubDate}
            slug={post.id}
            tags={post.data.tags}
          />
        ))}
      </div>
    ) : (
      <div class="mx-auto mt-12 max-w-3xl">
        <p class="text-neutral-400">Artigos em breve. Enquanto isso, veja nossos serviços.</p>
        <a href="/servicos" class="mt-4 inline-block text-sm text-brand-400 hover:text-brand-300">Ver serviços &rarr;</a>
      </div>
    )}
  </Container>
</Layout>
