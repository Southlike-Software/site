---
import Layout from "./Layout.astro";

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  author?: string;
}

const { title, description, pubDate, author = "Marcus Quirino" } = Astro.props;

const siteOrigin = Astro.site ? Astro.site.toString() : "https://southlikesoftware.com";

const schema = {
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  headline: title,
  description,
  datePublished: pubDate.toISOString(),
  author: {
    "@type": "Person",
    name: author,
  },
  publisher: {
    "@type": "Organization",
    name: "Southlike Software",
    url: siteOrigin,
  },
};

const formattedDate = pubDate.toLocaleDateString("pt-BR", {
  year: "numeric",
  month: "long",
  day: "numeric",
});
---

<Layout title={`${title} â€” Southlike Blog`} description={description} schema={schema}>
  <article class="mx-auto max-w-3xl px-6 py-16 lg:px-8">
    <a href="/blog" class="mb-8 inline-flex items-center gap-1 text-sm text-neutral-400 transition hover:text-brand-400">
      <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
      </svg>
      Voltar ao blog
    </a>

    <header class="mb-10">
      <h1 class="font-heading text-3xl font-semibold tracking-tight sm:text-4xl">{title}</h1>
      <div class="mt-4 flex items-center gap-3 text-sm text-neutral-400">
        <span>{author}</span>
        <span class="text-neutral-700">&middot;</span>
        <time datetime={pubDate.toISOString()}>{formattedDate}</time>
      </div>
    </header>

    <div class="prose prose-invert prose-headings:font-heading prose-a:text-brand-400 prose-a:no-underline hover:prose-a:underline max-w-none">
      <slot />
    </div>
  </article>
</Layout>
